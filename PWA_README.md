# PWA (Progressive Web App) функциональность

## Обзор
Приложение Teacher Tools теперь поддерживает PWA функциональность, что позволяет пользователям устанавливать его как нативное приложение на мобильные устройства и работать офлайн.

## Что включено

### 1. Манифест приложения (`/static/manifest.json`)
- Название и описание приложения
- Иконки разных размеров (16x16 до 512x512)
- Цвета темы и фона
- Режим отображения (standalone)
- Ярлыки для быстрого доступа к разделам

### 2. Service Worker (`/static/sw.js`)
- Кэширование статических файлов
- Офлайн поддержка
- Стратегии кэширования:
  - **Cache First** для статических файлов (CSS, JS, изображения)
  - **Network First** для API запросов и страниц
- Автоматические обновления
- Push уведомления (готово к использованию)

### 3. PWA мета-теги
- Apple Touch Icons для iOS
- Windows Tile настройки
- Android Chrome настройки
- Viewport оптимизация

### 4. Установка приложения
- Автоматическое предложение установки
- Кнопка "Установить приложение" (появляется при поддержке браузером)
- Обработка событий установки

### 5. Офлайн функциональность
- Кэширование основных страниц
- Офлайн страница при отсутствии интернета
- Уведомления о статусе подключения

## Файлы

### Основные файлы PWA:
- `static/manifest.json` - манифест приложения
- `static/sw.js` - Service Worker
- `static/browserconfig.xml` - настройки для Windows
- `static/icons/` - папка с иконками всех размеров
- `static/screenshots/` - скриншоты для магазинов приложений

### Иконки:
- `icon-16x16.png` до `icon-512x512.png` - основные иконки
- `calendar-icon-96x96.png` - иконка для ярлыка календаря
- `groups-icon-96x96.png` - иконка для ярлыка групп
- `assignments-icon-96x96.png` - иконка для ярлыка заданий

## Использование

### Для пользователей:
1. Откройте приложение в поддерживаемом браузере (Chrome, Edge, Safari)
2. При первом посещении появится предложение установить приложение
3. Нажмите "Установить" или используйте кнопку в меню браузера
4. Приложение будет добавлено на главный экран устройства

### Для разработчиков:
1. Все PWA файлы уже настроены и готовы к использованию
2. Service Worker автоматически регистрируется при загрузке страницы
3. Для обновления кэша измените версию в `sw.js` (CACHE_NAME)
4. Добавьте новые файлы в STATIC_FILES массив в Service Worker

## Поддерживаемые браузеры

### Полная поддержка:
- Chrome 68+
- Edge 79+
- Firefox 90+
- Safari 14+

### Частичная поддержка:
- Safari iOS 11.3+
- Samsung Internet 7.0+

## Тестирование

### Локальное тестирование:
1. Запустите приложение локально
2. Откройте в Chrome DevTools → Application → Manifest
3. Проверьте все настройки манифеста
4. В разделе Service Workers проверьте регистрацию

### Lighthouse аудит:
1. Откройте Chrome DevTools → Lighthouse
2. Выберите "Progressive Web App"
3. Запустите аудит
4. Исправьте найденные проблемы

## Настройка для продакшена

### HTTPS обязателен:
- PWA работает только по HTTPS
- Service Worker требует безопасного контекста
- На PythonAnywhere HTTPS включен по умолчанию

### Обновление кэша:
- При изменении файлов обновите CACHE_NAME в sw.js
- Пользователи получат уведомление об обновлении
- Кэш обновится автоматически при следующем посещении

## Дополнительные возможности

### Push уведомления:
- Код для push уведомлений уже включен в Service Worker
- Для активации настройте серверную часть уведомлений

### Фоновая синхронизация:
- Готов код для background sync
- Позволяет синхронизировать данные при восстановлении соединения

### Офлайн формы:
- Формы сохраняются в IndexedDB при отсутствии интернета
- Автоматическая отправка при восстановлении соединения

## Устранение неполадок

### Приложение не устанавливается:
1. Проверьте HTTPS соединение
2. Убедитесь, что manifest.json доступен
3. Проверьте консоль браузера на ошибки

### Service Worker не работает:
1. Проверьте путь к sw.js
2. Убедитесь в отсутствии ошибок в коде
3. Очистите кэш браузера

### Иконки не отображаются:
1. Проверьте пути к иконкам в manifest.json
2. Убедитесь, что файлы существуют
3. Проверьте MIME типы на сервере

## Полезные ссылки

- [PWA Documentation](https://web.dev/progressive-web-apps/)
- [Service Worker API](https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API)
- [Web App Manifest](https://developer.mozilla.org/en-US/docs/Web/Manifest)
- [Lighthouse PWA Audit](https://developers.google.com/web/tools/lighthouse)




